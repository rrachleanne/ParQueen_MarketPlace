# ParQueen

### T2A2 Market Place Assignment 

by Rachel Williams

------

Visit ParQueen - https://parqueenaustralia.herokuapp.com/

GitHub Repo - https://github.com/rrachleanne/ParQueen_MarketPlace

Presentation - https://spark.adobe.com/page/QwwP7zIoIuRym/

![alt-text](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/parqwueen.gif)


#### Why ParQueen?

The ParQueen Market place application is the best market place application to connect people to easily purchase car spots available in Australia.

This cloud-based market place solves a problem by enabling individuals and businesses to upload their available car spaces anywhere at anytime to sell.

ParQueen is the only application to use when selling a car spot or looking for a new one. No longer do people have to wait for periods of time when looking for a carspot, whether it be a regular visit to the shopping centre, a monday to friday commute to the city for your staff, consistent travelling to the airport or your favourite beach in summer. ParQueen can help you save time and money by providing you with an easy and convenient method for searching or selling your carspot. 

As the population grows, there are more cars on the road and a bigger demand on where to park. Join the community and list your carspot today, no matter if it's street parking, residential, Airport or a business there is always a need. 

#### The ParQueen Experience

Gone are the days when you had to wait to find a car spot in busy peak periods. ParQueen ensures you have a spot for every trip. Whether you're searching for a carspot at the beach or a security underground carpark, look no further, ParQueen has it all. 

Behind every carpark, is a successful journey to your destination. 

#### Target Audience 

The are two types of target audience for ParQueen, for people and businesses who:

1. Need an online presence to reach a greater audience in order to sell their carspots quickly; and
2. An easy and convenient application to find and purchase a carspot for every need

#### Functionality and Features

##### <u>Purpose</u>	

If people or businesses have an extra carspot or entire parking lot, they can earn more money by selling their carspot. The ParQueen profile ensures that the user has full control over the availability and prices of their carspots. In just a few steps, with an easy to use interface, they can list their space for free and have their ad up in seconds. Users selling their car can charge what they want and get paid quickly. 

On the other end, if a user is not selling and is looking for a carspot, they will have access to a huge variety of available carspots in Australia.

##### <u>Functionality</u>

With an easy to use interface, users can purchase or sell a carspot in the matter of minutes. 

ParQueen has designed the app to be quick and efficient for buying and selling, with fast sign up forms and limited information required for the profile. From there, users can search for a carspot by suburb or view all - making it easier and quicker for them to locate their dream spot. 

The application also offers a secure trusted platform for payment processing called Stripe so people and businesses can get paid faster.

##### <u>Features</u>

Features are what benefits users, the benefits are:

1. **Secure login** - ParQueen requires users to have an account should they wish to sell or buy a carspot. 
2. **Profile** - Users have access to their profile, in which they can manage their details, view analytics, their available carspots and create new carspot listings.
3. **Profile Dashboard** - The dashboard can help users track and manage all carspot listings from the Profile dashboard. This dashboard allows users to view all their listings and manage them, see what they have purchased from ParQueen and what they have sold from ParQueen.
4. **Profile  Analytics** - Users can see a quick overview of of total Listings, Carspots Purchased by them and Carspots Sold by them.
5. **Profile Modals** - Users never have to leave their profile to view their listings, carspots sold or purchased as all the information is displayed in a pop-up modal on the profile page.
6. **Product Forms** - ParQueen offers easy to use new product listing forms with minimal information required to get the listing up within minutes. Inbuilt functions such as dropdown options make the selection quicker.
7. **Listings** - Once a carspot is listed, it will display automatically on the listings page.
8. **Search** - With an inbuilt search method, people can easily find a car located within or 20km around the desired location by entering in the suburb.
9. **Availability** - If a user is not ready to sell their carspot or for some reason they don't want to advertise it anymore, then the user can change the availability of the listing to no longer appear on the listing page.
10. **Image control** - Users are only able to upload gif, png, jpg and jpeg files.
11. **Google Maps Integration** - ParQueen is integrated with Google Maps allowing people to review where the carspot is exactly situated. This provides a seamless user experience.
12. **AWS Data storage** - ParQueen securely stores and protects images from profiles and listings on AWS.
13. **Stripe Integration** - ParQueen is integrated with Stripe allowing users the flexibility and security when making payments online. In return, people selling a car will receive their money faster.

<u>**Sitemap**</u>

##### ![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/Sitemap.jpeg)

<u>**Screenshots**</u>



**Home Page**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/HOMEPICTURE.jpg)

**Buyers User Experience**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/buyexp.jpg)

**Profile Page**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/Profile.jpg)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/analytics.jpg)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/mylistings.jpg)

**Profile Sign-up Form and Product Form**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/profileform.jpg)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/uploadcar.jpg)

**Stripe Feature**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/stripe.jpg)

**Google Map Feature**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/Googlemaps.jpg)

**Search Feature**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/search.jpg)



**Welcome and Contact Page**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/welcome.jpg)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/contact.jpg)

**<u>Technology Stack</u>**

ParQueen Tech stack consists of:

- Front-end: HTML5, CSS3, SCSS, Bootstrap and JavaScript

- Back-end: PostgreSQL, Ruby 2.7.1 and Ruby on Rails 6.0.3.2.

- DevOps: Git, Github, Visual Studio Code and Heroku

- APIs: Google Geocoding API, Stripe and AWS S3

  

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/techstack.jpeg)

#### User Stories

There are two types of user experiences: 

1. Customer; and
2. Vendor

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/customerexp.jpeg)



- Customer is on home page

- Customer clicks 'Buy' from Nav bar or button on home page

- User is redirected to the Listing page where they are presented with the carspots available or they can search by suburb

- User clicks on 'Details' of a particular listing and is then re-directed to login page:

  If existing user logs in:

  - Redirected to that ProductID to view listing 
  - User clicks 'Buy'
  - Redirected to stripe to pay
  - Upon successful payment, user is re-directed back to profile to view their purchased products

  If new user logs in :

  - Redirected to create a new profile

  - Upon profile save, user is re-directed to that previous ProductID

  - User clicks 'Buy'

  - Redirected to stripe to pay

  - Upon successful payment, user is re-directed back to profile to view their purchased products

    



![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/sellerexp.jpeg)

- Vendor is on home page

- Vendor clicks 'Sell' from Nav bar or button on home page

- Vendor is re-directed to the login page:

  If existing user logs in:

  - Redirected to Sell Carspot form
  - Upon saving, vendor is redirected to the ProductID to view listing 
  - Vendor can access profile to view listings, add, edit, delete and see what has been sold

  If new user logs in :

  - Redirected to create a new profile
  - Upon profile save, vendor is redirected to Sell Carspot form
  - Upon saving, vendor is redirected to the ProductID to view listing 
  - Vendor can access profile to view listings, add, edit, delete and see what has been sold

#### Wireframes

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/HomePage.png)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/signin.png)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/profileform.png)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/uploadcar.png)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/listings.png)

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/userprofile.png)

#### ERD - Database Schema Design

Simple ERD displaying a User table that has one profile and many products. The Profile table belongs to the user and has many products to sell and products to purchase. The Products table belongs to the customer and the vendor on the Profile table. This is achievable by implementing self-join association. 

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/erd.jpg)



#### High-level components

The high-level innovated components of the ParQueen application are:

1. Authorisation and Authentication that enables users to sign up to make a purchase or sell an item. The authorization inhibits other users from being able to access other profiles to modify their listings. This quality feature demonstrates that ParQueen is built to be user-friendly and secure for all users. Data will be displayed based on whether the user is signed in and adds another layer of security ensuring that the current user is equal to the current profile, if the user does not meet those requirements the ParQueen application will re-direct them to the appropriate method to ensure they sign up before continuing.
2. Application logic behind the scenes enables users to quickly post their carspot using an inbuilt form that will render the carspot within minutes, meaning that this application is time efficient for the person and/or business selling. Using this logic, ParQueen will display all listings available, hide non-available, hide sold items so that the user experience is efficient. 
3. Google Maps integrated with ParQueen allows customers to easily identify where their car is located rather than having to google it themselves. 
4. Stripe offers a secure and seamless payment gateway that allows customers to pay multiple ways and for vendors to be paid <u>and</u> paid quickly. This eliminates users having to correspond and also adds peace of mind when selling a carspot. 
5. Redirections are often thought of last, however with the ParQueen application, logging in is just too easy. Whether you're a new customer or an existing customer/vendor, you'll be directed to the correct page or the page you were intending to visit when it prompted you to login. This feature enables users to have a seamless and user friendly experience.
6. The Profile page allows any user, whether they are the customer buying or vendor selling to see an overview of their profile details, what listings they have (that they can also manage), what carspots they have purchased, what carspots they have sold and analytics. This overview allows users to see what is happening and for them to control. There is no need for two accounts to manage selling and buying, its all in one place!

#### Third Party Services

The ParQueen application uses third party APIs to enhance the user experience. These services are:

1. AWS - To securely and freely store images from profiles and product listings in the cloud.
2. Devise Login - A secure and seamless user experience when logging in, logging out, signing up or changing/retrieving passwords.
3. Simple Forms - A easy to use, user friendly login, profile and product form that captures all the necessary information and informs if there is an error.
4. Google Maps - Static Google maps integrated to pick up the location by the input address as it picks up the latitude and longitude automatically to then render a map for users to easily identify where the carspots are.
5. Stripe - Payments are now processed using a world-wide trusted gateway to securely handle any online payments. This makes it convenient for both parties involved.
6. Heroku - An application that powers the ParQueen Marketplace online, securely and quickly for users to access anywhere at anytime.

#### Model - Relationships

For what may look like a complex application with a many Models, the ParQueen application is designed to not have complex Model relationships. Excluding the Application_record.rb Model, there are a total of three Models, these are:

- User
- Products
- Profile 

**<u>User</u>**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/user.jpg)

- The User model has one profile because you don't want the user to have many profiles; and 
- The User model has many products because a user can have 0 to many products.
- In addition, this model also handles the Devise users gem for authentication when signing in to the application

**<u>Profile</u>**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/profilem.jpg)

- The Profile model belongs to the user as there is only one user and profile shared between them;
- The Profile model has many products to sell via the Product model that corresponds to a vendor_id; and 
- The Profile Model has many products to purchase via the Product model that corresponds to the customer_id
- This model also only accepts one attached picture and validates the file type and validates that all the fields are completed by the vendor/customer user

**<u>Product</u>**

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/product.jpg)

- The Product model belongs to the customer from the Profile model; and
- The Product model belongs to the vendor from the Profile model
- Customer is however optional because when creating a product, the customer does not yet exist until they have ordered a product, but the vendor is required upon selling and item
- This model also only accepts one attached picture and validates the file type and validates that all the fields are completed/filled by the vendor user
- This model also validates the address by using the gem geocoder to enable the feature of GoogleMaps, the address is joined together.

#### Database Relations

**Model**

ParQueen uses PostgreSQL, a relation database management system that has an MVC model, Model, View and Controller. The Model in Parqueen has Users, Profile and Product. The Model enables the ability to establish relationships between the tables, and because of this, you can call upon the rows to gather that information without having duplicate data. ParQueen does not have duplicate row items, it calls on the other models, in what is known as a relationship between the tables. One associates with the other.

The application is designed to associate between models in a relationship, retrieve data, store data and control what happens with that information and then render that to the user. In ParQueen, there are three Models, the User has one Profile, the Product belongs to the Profiles vendor or customer and the Profile has many products to sell or purchase. 

**Controller**

With the model setup, we can establish the controller, and what happens with the data, for example:

The Profiles Controller in ParQueen controls the:

- Authenticating the user to login
- Authorising what the user can see and edit the data
- Render various pages based on whether they log in or meet criteria such as current_user.profile before showing a page. If they don't meet the requirements they will be re-directed until they eventually meet the requirement to view that page
- Ability to redirect new users to complete a profile and save, upon saving , redirect to a new page
- Ability to redirect existing users to edit a profile and save, upon saving , redirect to a new page
- Ability to redirect existing users to delete a profile and save, upon saving , redirect to a new page

The Products Controller in ParQueen controls the same as above, however there are few differences:

- The Profile Index within the Profile Controller displays a search method on what to display should the search be called on the front end. For example, the follow code is in ParQueen:

```rails
def index
    if params["search"] 
      @search=true
      @products= Product.where(suburb: params["search"], availability:true, customer_id:nil)
    else
      if user_signed_in?
        if current_user.profile
          redirect_to profile_path(current_user.profile.id)
        else 
          redirect_to new_profile_path
      end
      else
        redirect_to new_user_session_path
      end
    end 
  end
```



- In addition to this, the Products controller also handles how Stipe should behave when the user clicks "buy" on the front-end

```rails
 def show
  
    if user_signed_in?
      if current_user.profile
    
    session = Stripe::Checkout::Session.create(
      payment_method_types: ['card'],
      customer_email: current_user.email,
      line_items: [{
          name: @product.suburb,
          description: @product.category,
          amount: @product.price * 100,
          currency: 'aud',
          quantity: 1,
      }],
      payment_intent_data: {
          metadata: {
              user_id: current_user.profile.id,
              product_id: @product.id
          }
      },
      success_url: "#{root_url}payments/success?userId=#{current_user.id}&productId=#{@product.id}",
      cancel_url: "#{root_url}listing/index"
  )
  
        @session_id = session.id

        else 
          redirect_to new_profile_path
        end
      else
      redirect_to new_user_session_path
    end
  end
```

- The Products controller also handles the most important part, differentiating between a customer and a vendor. In here, when a new product is generated it will save it against the vendor_id, thus giving the product a vendor ID which can be later used to sort and show products listed or sold by the vendor. 

```rails
def create
    @product = Product.new(product_params)
    @product.vendor_id = current_user.profile.id
    
    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, notice: 'Product was successfully created.' }
        format.json { render :show, status: :created, location: @product }
      else
        format.html { render :new }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  end
```



- Lastly, the Products controller has a small but valuable method called number_to_currency allowing the application to convert numbers from 2000 to $2,000.00 when being rendered. 

The ParQueen application has more than three controllers, not all the time does a model need to correspond with a controller. Controllers can be used to render pages for users to see but in the backend the controller is rendering what should/shouldn't appear. For example, in ParQueen there are eight controllers in total. Two of them being more important then the other non model related controllers for the ParQueen application, called Listings_controller.rb and Application_controlelr.rb. 

- The Listings_controller: Controls the search functionality by rendering anything near 20km(12miles) from the product and only displays listings where availability equals to true and the customer_id equals to nil, meaning that the product has yet to be sold. 

```
def index
    if params["search"].present? 
     @products = Product.near(params["search"], 12, :order => :distance) 
    else
      @products=Product.where(availability:true, customer_id:nil)
    end
  end
end
```



- The Application_controller: Controls what happens after the user signs in, it will render the previously stored location or it will render the profiles_path.

```
def after_sign_in_path_for(resource)
    stored_location_for(resource) || profiles_path
  end
```

Establishing the methods is very important here for what you would want to display to the user, which is what we call in MVC, the View.

**View**

Controllers allow us to render our views, they associate by the exact name that the controller has. For example, the following controller is Profile and this Profile controller has a 'Show' method that renders show.html.erb within the /view/profiles folder. In here we can choose what to display, however it sometimes needs to be defined in the controller method on what you can and cannot do. 

As outlined above, the Profile Controller will examine if the user is logged in, however if they are not logged in, they will be re-directed to another view to log in, that is because the control authenticates the user before initiating that step. However, if the user is logged in, it will only display the profile if the current_user is equal to that profile. If for some reason, it is not, it will render the new profile page for the user to create a profile. 

As you can see, ParQueen has a MVC product that connects together in a relational database by establishing the relations between the tables, controlling what the data does and how it will be rendered based on the controllers requirements. 



#### Task Allocation and Tracking

When building the ParQueen application there were a number of steps executed for planning the application, completing tasks and for tracking. These are the three stages:

**Planning**

1. ERD
2. Wireframes
3. Trelloboard

**Tasks**

1. Trello
2. Top 5 (or more) daily task in my notebook

**Tracking**

1. Trello

Once I had my idea, the ERD enabled me to see what the structure and relationships would be and the Wireframes enabled me to visualise it. With both these things, I was able to go back and forth and re-work what I had to ensure I had a great user experience and no duplication when it came to coding.

The trelloboard assisted me to layout everything that had to be done. I also used a notebook to write down items I wanted to focus on. Some days I was able to do more, others days, the task was too large or presented itself with bugs.

Here is the breakdown from my notes in the the first 16 days:

<u>Day 1</u>: Make a list, execute: The first item was to do the application set up, enter in Postgres credentials into Database.yml, db:create and add relevant gems. From there, I spent a bit researching the design, colors, font, icons, logo and what bootstrap components I was going to use. I implemented a home page, routes and authentication - commit to github.

<u>Day 2</u>: Make a list, execute. Implement relations for User, Profile and Products, authorisation, re-directs and self-join association - commit to github.

<u>Day 3:</u> Make a list, execute. Forms, picture uploads, more redirects/if user logged in/not etc and styling - commit to github.

<u>Day 4</u>: Make a list, execute. Profile Page styling, listing controller, authorisation, delete unnecessary rows and tables - commit to github.

Day 5: Make a list, execute. Dropdown options(select) on forms, Show product listing on profile, customise login messages, custom 404 messages, Contact page and About Page - commit to github.

<u>Day 6</u>: Make a list, execute. More redirects/if user logged in/not etc, nav bar link after sign-in, redirect and styling - commit to github.

<u>Day 7:</u> Make a list, execute. Created an Order scaffold, which I realised I didn't need one- rolled back and fix bugs - commit to github.

<u>Day 8:</u> Make a list, execute. Google Maps integration, more redirects/if user logged in/not etc and style. Fix errors - commit to github.

<u>Day 9:</u> Make a list, execute. Google Maps integration, Stripe Integration, add relevant rows for Stripe redirects and style. Fix errors - commit to github.

<u>Day 10:</u> Make a list, execute. Implemented search functionality for suburb, hide non-available items on listing page - commit to github

<u>Day 11:</u> Make a list, execute. Hide purchased items from listing page, redirect user to same page if required to login, file type uploader - commit to github

<u>Day 12:</u> Make a list, execute. Researched and played around with searching by state or category, styling, styling buttons and show purchased items on profile page - commit to github

<u>Day 13:</u> Make a list, execute. Show sold items on listing page, fix search issue, implement analytics with product.count - commit to github

<u>Day 14:</u> Make a list, execute. Use AWS S3, deploy to heroku.

<u>Day 15:</u> Make a list, execute. Deploy to Heroku - lots of issues.

<u>Day 16:</u> Make a list, execute. Finalise styling, clean up code and add notes. Fix redirect to sign up page to go to new profile page > had to add gem to resolve issue, add user and listing data onto Heroku and test. Get external person and fellow classmate to test - commit to github.

Here is my trelloboard and a few checklists:

<u>Most items are completed, final review, one external tester and commit is required as at 6/8/2020S</u>

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/trello.jpg)

*<u>Example of steps to create application</u>*

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/appsetup.jpg)

<u>Example of test plan to be carried out</u>

![](https://github.com/rrachleanne/ParQueen_MarketPlace/blob/master/docs/testplan.jpg)
